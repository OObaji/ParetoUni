<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniHub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030712;
            color: #f9fafb;
        }

        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
        }
        
        .futuristic-card {
            background-color: rgba(17, 24, 39, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(55, 65, 81, 0.4);
            transition: all 0.3s ease;
        }
        .futuristic-card:hover {
            border-color: rgba(56, 189, 248, 0.6);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 0 25px rgba(56, 189, 248, 0.15);
        }

        .nav-link {
            transition: all 0.2s ease-in-out;
        }
        .nav-link.active {
            color: #0ea5e9;
            background-color: rgba(14, 165, 233, 0.1);
        }
        .nav-link:hover {
             color: #38bdf8;
             background-color: rgba(56, 189, 248, 0.05);
        }
        
        .page {
            display: none;
            padding-top: 5rem;
            padding-bottom: 5rem;
            min-height: calc(100vh - 80px);
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        @media (max-width: 1023px) {
            .page {
                padding-top: 1rem;
                padding-bottom: 2rem;
            }
        }

        /* Calendar Styles */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); }
        .calendar-day {
            background-color: rgba(31, 41, 55, 0.3);
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .calendar-day.other-month { color: #4b5563; cursor: default; }
        .calendar-day.today { background-color: rgba(56, 189, 248, 0.2); border: 1px solid #38bdf8; }
        .calendar-day:not(.other-month):hover { background-color: rgba(55, 65, 81, 0.5); }
        
        .event-bar { height: 6px; border-radius: 9999px; }
        .event-bar-lecture { background-color: #38bdf8; } /* Sky Blue */
        .event-bar-seminar { background-color: #a78bfa; } /* Violet */
        .event-bar-uni { background-color: #f59e0b; } /* Amber */
        .event-bar-break { background-color: #10b981; } /* Emerald */
        .event-bar-graduation { background-color: #ec4899; } /* Pink */


        /* Modal Styles */
        .modal {
            visibility: hidden; opacity: 0; transition: visibility 0s 0.3s, opacity 0.3s;
        }
        .modal.open {
            visibility: visible; opacity: 1; transition: visibility 0s, opacity 0.3s;
        }
        .modal-content {
            transform: scale(0.9); transition: transform 0.3s;
        }
        .modal.open .modal-content { transform: scale(1); }

        summary::-webkit-details-marker { display: none; }
        summary { list-style: none; }

        .timeline-item {
            opacity: 0;
        }
        .timeline-item.visible {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        .milestone-checkbox {
            appearance: none;
            background-color: transparent;
            width: 24px;
            height: 24px;
            border: 2px solid #6b7280;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
        }
        .milestone-checkbox:checked {
            background-color: #0ea5e9;
            border-color: #0ea5e9;
        }
        .milestone-checkbox:checked::after {
            content: 'âœ“';
            color: white;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: 16px;
            font-weight: bold;
        }
        .milestone-content.completed {
            text-decoration: line-through;
            color: #6b7280;
        }
    </style>
</head>
<body class="flex">
    
    <canvas id="bg-canvas"></canvas>

    <!-- Desktop Sidebar Navigation -->
    <nav id="desktop-nav" class="fixed top-0 left-0 h-full bg-gray-900/80 backdrop-blur-md w-64 border-r border-gray-800 p-6 hidden lg:block z-50">
        <div class="flex items-center gap-3 mb-10">
            <div class="p-2 bg-sky-500/10 rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-sky-400"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
            </div>
            <h1 class="text-xl font-bold">UniHub</h1>
        </div>
        <ul id="main-nav-links" class="space-y-2">
            <li><a href="#home" class="nav-link active flex items-center gap-3 py-2 px-3 rounded-lg font-semibold">Home</a></li>
            <li><a href="#schedule" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg font-semibold">Schedule</a></li>
            <li><a href="#calendar" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg font-semibold">Academic Calendar</a></li>
            <li><a href="#assessments" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg font-semibold">Assessments</a></li>
            <li><a href="#dissertation" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg font-semibold">Dissertation</a></li>
            <li><a href="#milestones" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg font-semibold">Milestones</a></li>
        </ul>
    </nav>

    <!-- Mobile Header & Menu -->
    <header id="mobile-header" class="lg:hidden fixed top-0 left-0 w-full bg-gray-900/80 backdrop-blur-md border-b border-gray-800 p-4 flex items-center justify-between z-40">
        <h1 id="mobile-title" class="text-xl font-bold text-white">Home</h1>
        <button id="menu-btn" class="p-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
    </header>
    <div id="mobile-menu" class="lg:hidden fixed top-0 left-0 w-full h-full bg-gray-950/95 backdrop-blur-lg z-50 p-6 transform -translate-x-full transition-transform duration-300 ease-in-out">
        <div class="flex items-center justify-between mb-10"><h1 class="text-xl font-bold">UniHub</h1><button id="close-btn" class="p-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div>
        <ul id="mobile-nav-links" class="space-y-4">
            <!-- Mobile nav links will be cloned here -->
        </ul>
    </div>

    <!-- Main Content -->
    <main class="w-full lg:ml-64 p-6 pt-24 sm:p-10 lg:p-16 lg:pt-10">

        <!-- Home Page -->
        <section id="home" class="page active">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                <div>
                     <h1 class="text-4xl sm:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-cyan-300 mb-2">Welcome to your UniHub</h1>
                     <p id="home-date" class="text-lg text-gray-400"></p>
                </div>
                <div id="weather-card" class="futuristic-card p-6 rounded-2xl flex items-center justify-center gap-6">
                    <!-- Weather info is injected here -->
                </div>
            </div>
             
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                <div class="futuristic-card p-6 rounded-2xl"><h3 class="font-bold text-xl text-sky-400 mb-2">Quote of the Day</h3><p class="text-gray-300 italic">"The secret of getting ahead is getting started."</p><p class="text-right text-gray-400 mt-2">- Mark Twain</p></div>
                <div class="futuristic-card p-6 rounded-2xl"><h3 class="font-bold text-xl text-sky-400 mb-2">Productivity Principle: Eisenhower Matrix</h3><p class="text-gray-300">Separate your actions based on four possibilities: Urgent and important (tasks to do immediately), Important, but not urgent (tasks to schedule for later), Urgent, but not important (tasks to delegate), Neither urgent nor important (tasks to eliminate).</p></div>
            </div>
            <h2 class="text-3xl font-bold mb-8">Your Courses</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="p-2 bg-gray-700 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-sky-400"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div><div><h3 class="font-bold text-lg">Internet of Things</h3><p class="text-sm text-gray-400">CSCORE2H001</p></div></div>
                <div class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="p-2 bg-gray-700 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-sky-400"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg></div><div><h3 class="font-bold text-lg">Machine Learning</h3><p class="text-sm text-gray-400">CSCORE2H001</p></div></div>
                <div class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="p-2 bg-gray-700 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-sky-400"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg></div><div><h3 class="font-bold text-lg">Web Innovations</h3><p class="text-sm text-gray-400">N/A</p></div></div>
                 <div class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="p-2 bg-gray-700 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-sky-400"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg></div><div><h3 class="font-bold text-lg">Cyber Security</h3><p class="text-sm text-gray-400">CSCORE1H001</p></div></div>
                 <div class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="p-2 bg-gray-700 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-sky-400"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg></div><div><h3 class="font-bold text-lg">Mobile Development</h3><p class="text-sm text-gray-400">N/A</p></div></div>
                 <div class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="p-2 bg-gray-700 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-sky-400"><path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18z"/><path d="M12 21a9 9 0 0 1-9-9"/><path d="M3 12a9 9 0 0 0 9 9"/></svg></div><div><h3 class="font-bold text-lg">Spatial Computing</h3><p class="text-sm text-gray-400">N/A</p></div></div>
            </div>
        </section>

        <!-- Schedule Page -->
        <section id="schedule" class="page">
            <h2 class="text-3xl font-bold mb-4">Today's Schedule</h2>
            <p class="text-gray-400 mb-8" id="today-date"></p>
            <div id="upcoming-lecture-card" class="mb-8"></div>
            <div id="schedule-container" class="space-y-6"></div>
        </section>

        <!-- Academic Calendar Page -->
        <section id="calendar" class="page">
            <div class="flex flex-col sm:flex-row items-center justify-between mb-8 gap-4">
                <h2 id="calendar-title" class="text-3xl font-bold"></h2>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center gap-2 text-sm"><span class="w-3 h-3 event-bar-lecture rounded-full"></span> Lecture</div>
                    <div class="flex items-center gap-2 text-sm"><span class="w-3 h-3 event-bar-seminar rounded-full"></span> Seminar</div>
                    <div class="flex items-center gap-2 text-sm"><span class="w-3 h-3 event-bar-uni rounded-full"></span> Uni Events</div>
                    <div class="flex items-center gap-2 text-sm"><span class="w-3 h-3 event-bar-break rounded-full"></span> Break</div>
                    <div class="flex items-center gap-2 text-sm"><span class="w-3 h-3 event-bar-graduation rounded-full"></span> Graduation</div>
                    <div class="flex gap-2">
                        <button id="prev-month" class="futuristic-card p-2 rounded-md hover:bg-sky-500/20">&lt;</button>
                        <button id="next-month" class="futuristic-card p-2 rounded-md hover:bg-sky-500/20">&gt;</button>
                    </div>
                </div>
            </div>
            <div class="futuristic-card p-4 rounded-xl">
                <div class="calendar-grid mb-2 text-center text-sky-400 font-semibold text-sm"><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div><div>Sun</div></div>
                <div id="calendar-grid" class="calendar-grid gap-1"></div>
            </div>
        </section>

        <!-- Assessments Page -->
        <section id="assessments" class="page">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold">Assessments</h2>
                <button id="add-assessment-btn" class="bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded-lg">+ Add New</button>
            </div>
            <div id="assessment-list" class="grid grid-cols-1 md:grid-cols-2 gap-8"></div>
            <p class="text-center text-gray-500 mt-8 text-sm">Note: New assessments are not saved permanently and will be lost on page refresh.</p>
        </section>

        <!-- Dissertation Page -->
        <section id="dissertation" class="page">
             <h2 class="text-3xl font-bold mb-8">Dissertation Hub</h2>
             <div class="mb-12">
                <h3 class="text-2xl font-bold mb-4">Key Deadlines</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="futuristic-card p-4 rounded-lg text-center"><p class="font-bold">Select Supervisor</p><p class="text-sky-300">Oct 20, 2025</p></div>
                    <div class="futuristic-card p-4 rounded-lg text-center"><p class="font-bold">Ethics Form</p><p class="text-sky-300">Nov 14, 2025</p></div>
                    <div class="futuristic-card p-4 rounded-lg text-center sm:col-span-2 lg:col-span-1 border-red-500/50"><p class="font-bold text-red-300">Final Submission</p><p class="text-red-300">Apr 15, 2026</p></div>
                </div>
             </div>
             <h3 class="text-2xl font-bold mb-4">Dissertation Structure</h3>
             <div class="space-y-4">
                <details class="futuristic-card rounded-xl overflow-hidden group"><summary class="flex items-center justify-between p-6 cursor-pointer"><h3 class="text-xl font-bold text-sky-300">Abstract</h3><div class="transform transition-transform duration-300 group-open:rotate-90"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><polyline points="9 18 15 12 9 6"></polyline></svg></div></summary><div class="bg-gray-900/50 p-6 border-t border-gray-700 space-y-4"><p>A concise summary (usually 150-300 words) of the entire dissertation. It should state the problem, the methods used, the key results, and the main conclusions. Write this last.</p></div></details>
                <details class="futuristic-card rounded-xl overflow-hidden group"><summary class="flex items-center justify-between p-6 cursor-pointer"><h3 class="text-xl font-bold text-sky-300">Chapter 1: Introduction</h3><div class="transform transition-transform duration-300 group-open:rotate-90"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><polyline points="9 18 15 12 9 6"></polyline></svg></div></summary><div class="bg-gray-900/50 p-6 border-t border-gray-700 space-y-4"><p><strong>Purpose:</strong> Set the scene for your research. Introduce the topic, provide background context, and state the problem you are addressing.</p><p><strong>Key Elements:</strong> Research Aims and Objectives, Research Questions, Scope of the Study, and an outline of the dissertation structure.</p></div></details>
                <details class="futuristic-card rounded-xl overflow-hidden group"><summary class="flex items-center justify-between p-6 cursor-pointer"><h3 class="text-xl font-bold text-sky-300">Chapter 2: Literature Review</h3><div class="transform transition-transform duration-300 group-open:rotate-90"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><polyline points="9 18 15 12 9 6"></polyline></svg></div></summary><div class="bg-gray-900/50 p-6 border-t border-gray-700 space-y-4"><p><strong>Sources:</strong> Prioritize journal/conference papers. Be cautious with blogs. Avoid Wikis.</p><p><strong>Structure:</strong> Separate into logical subtopics. Synthesize and compare works using connecting words (e.g., "however," "in contrast," "similarly").</p></div></details>
                <details class="futuristic-card rounded-xl overflow-hidden group"><summary class="flex items-center justify-between p-6 cursor-pointer"><h3 class="text-xl font-bold text-sky-300">Chapter 3: Methodology</h3><div class="transform transition-transform duration-300 group-open:rotate-90"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><polyline points="9 18 15 12 9 6"></polyline></svg></div></summary><div class="bg-gray-900/50 p-6 border-t border-gray-700 space-y-4"><p><strong>Clarity:</strong> Must be detailed enough for replication. Justify all decisions with citations.</p><p><strong>Content:</strong> Describe the theory (methodology) and the step-by-step process (research design). Address ethical considerations.</p></div></details>
                <details class="futuristic-card rounded-xl overflow-hidden group"><summary class="flex items-center justify-between p-6 cursor-pointer"><h3 class="text-xl font-bold text-sky-300">Chapter 4: Results & Discussion</h3><div class="transform transition-transform duration-300 group-open:rotate-90"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><polyline points="9 18 15 12 9 6"></polyline></svg></div></summary><div class="bg-gray-900/50 p-6 border-t border-gray-700 space-y-4"><p><strong>Analysis:</strong> Don't just present results, critically analyze them. Tie findings back to Chapter 1 objectives.</p><p><strong>Comparison:</strong> Compare your results with existing literature from Chapter 2. Acknowledge limitations and negative findings.</p></div></details>
                <details class="futuristic-card rounded-xl overflow-hidden group"><summary class="flex items-center justify-between p-6 cursor-pointer"><h3 class="text-xl font-bold text-sky-300">Chapter 5: Conclusion</h3><div class="transform transition-transform duration-300 group-open:rotate-90"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><polyline points="9 18 15 12 9 6"></polyline></svg></div></summary><div class="bg-gray-900/50 p-6 border-t border-gray-700 space-y-4"><p><strong>Summary:</strong> Reiterate main points and findings. Emphasize how objectives were met.</p><p><strong>Future Work:</strong> Propose concrete next steps for future research, not vague ideas.</p></div></details>
                <details class="futuristic-card rounded-xl overflow-hidden group"><summary class="flex items-center justify-between p-6 cursor-pointer"><h3 class="text-xl font-bold text-sky-300">References & Appendices</h3><div class="transform transition-transform duration-300 group-open:rotate-90"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><polyline points="9 18 15 12 9 6"></polyline></svg></div></summary><div class="bg-gray-900/50 p-6 border-t border-gray-700 space-y-4"><p><strong>References:</strong> A complete list of all sources cited in your work, formatted consistently in a specific style (e.g., APA, IEEE).</p><p><strong>Appendices:</strong> Supplementary material that is too detailed for the main body, such as large code blocks, survey questions, or raw data tables.</p></div></details>
             </div>

             <h3 class="text-2xl font-bold mt-12 mb-4">Research & Writing Tools</h3>
             <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <a href="https://scholar.google.com/" target="_blank" rel="noopener noreferrer" class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="w-10 h-10 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="M12 11.5A2.5 2.5 0 0 1 9.5 9V7.5a2.5 2.5 0 0 1 5 0V9a2.5 2.5 0 0 1-2.5 2.5z"></path></svg></div><div><h3 class="font-bold text-lg text-white">Google Scholar</h3><p class="text-gray-400 text-sm">Broad search engine for academic literature.</p></div></a>
                <a href="https://ieeexplore.ieee.org/" target="_blank" rel="noopener noreferrer" class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="w-10 h-10 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M4 11a8 8 0 0 1 8-8v8h8a8 8 0 0 1-8 8v-8H4z"/><path d="M20 11V3"/><path d="M13 20h8"/></svg></div><div><h3 class="font-bold text-lg text-white">IEEE Xplore</h3><p class="text-gray-400 text-sm">High-quality engineering and CS papers.</p></div></a>
                <a href="https://dl.acm.org/" target="_blank" rel="noopener noreferrer" class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="w-10 h-10 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M12 3v18"/><path d="M3 12h18"/><path d="M17.6 6.4 6.4 17.6"/><path d="M17.6 17.6 6.4 6.4"/></svg></div><div><h3 class="font-bold text-lg text-white">ACM Digital Library</h3><p class="text-gray-400 text-sm">Computing machinery publications.</p></div></a>
                <a href="https://arxiv.org/" target="_blank" rel="noopener noreferrer" class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="w-10 h-10 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg></div><div><h3 class="font-bold text-lg text-white">arXiv</h3><p class="text-gray-400 text-sm">Pre-print papers in CS, math, and physics.</p></div></a>
                <a href="https://www.zotero.org/" target="_blank" rel="noopener noreferrer" class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="w-10 h-10 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M4 3h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/><path d="m9 12 2 3 2-3"/><path d="M9 7h6"/></svg></div><div><h3 class="font-bold text-lg text-white">Zotero</h3><p class="text-gray-400 text-sm">Collect, organize, cite, and share research.</p></div></a>
                <a href="https://www.grammarly.com/" target="_blank" rel="noopener noreferrer" class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="w-10 h-10 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="m12 13 4-4"/><path d="m12 13-4-4"/><circle cx="12" cy="12" r="10"/><path d="m12 17.5.01-.01"/></svg></div><div><h3 class="font-bold text-lg text-white">Grammarly</h3><p class="text-gray-400 text-sm">AI-powered writing and grammar assistant.</p></div></a>
                <a href="https://www.turnitin.com/" target="_blank" rel="noopener noreferrer" class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="w-10 h-10 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M19.5 12.5c0 4.1-3.2 7.5-7.5 7.5-4.1 0-7.5-3.2-7.5-7.5"/><path d="M19.5 12.5c0-4.1-3.2-7.5-7.5-7.5-4.1 0-7.5 3.2-7.5 7.5"/><path d="M12 2v20"/><circle cx="12" cy="12" r="1.5"/></svg></div><div><h3 class="font-bold text-lg text-white">Turnitin</h3><p class="text-gray-400 text-sm">Check for plagiarism (via university portal).</p></div></a>
                <a href="https://www.overleaf.com/" target="_blank" rel="noopener noreferrer" class="futuristic-card p-6 rounded-2xl flex items-center gap-4"><div class="w-10 h-10 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M12 8V2H8a2 2 0 0 0-2 2v4h6z"/><path d="M12 8h4a2 2 0 0 1 2 2v4h-6V8z"/><path d="M12 22v-6H6v4a2 2 0 0 0 2 2h4z"/><path d="M12 16h6v-4a2 2 0 0 0-2-2h-4v6z"/></svg></div><div><h3 class="font-bold text-lg text-white">Overleaf</h3><p class="text-gray-400 text-sm">Online collaborative LaTeX editor for papers.</p></div></a>
             </div>
        </section>

        <!-- Milestones Page -->
        <section id="milestones" class="page">
            <h2 class="text-3xl font-bold mb-8">Your Milestones</h2>
            <div id="milestones-container" class="relative border-l-2 border-sky-900 ml-4">
                <!-- Milestones will be injected here by JavaScript -->
            </div>
        </section>

    </main>
    
    <!-- Modals -->
    <div id="assessment-modal" class="modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50">
        <div class="modal-content futuristic-card p-8 rounded-2xl w-full max-w-md">
            <h3 class="text-2xl font-bold mb-6">Add New Assessment</h3>
            <form id="assessment-form" class="space-y-4">
                <div><label for="title" class="block mb-1 text-sm font-medium text-gray-300">Title</label><input type="text" id="title" required class="w-full bg-gray-900/50 border border-gray-600 rounded-lg p-2 focus:border-sky-500 focus:ring-sky-500 outline-none"></div>
                <div><label for="deadline-date" class="block mb-1 text-sm font-medium text-gray-300">Deadline Date</label><input type="date" id="deadline-date" required class="w-full bg-gray-900/50 border border-gray-600 rounded-lg p-2 focus:border-sky-500 focus:ring-sky-500 outline-none"></div>
                <div><label for="deadline-time" class="block mb-1 text-sm font-medium text-gray-300">Deadline Time</label><input type="time" id="deadline-time" required class="w-full bg-gray-900/50 border border-gray-600 rounded-lg p-2 focus:border-sky-500 focus:ring-sky-500 outline-none"></div>
                <div class="flex gap-4 pt-4">
                    <button type="button" id="cancel-assessment-btn" class="w-full futuristic-card font-semibold py-2 px-4 rounded-lg hover:bg-gray-700/50">Cancel</button>
                    <button type="submit" class="w-full bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded-lg">Add Assessment</button>
                </div>
            </form>
        </div>
    </div>
    <div id="calendar-modal" class="modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50">
        <div class="modal-content futuristic-card p-8 rounded-2xl w-full max-w-md">
            <div class="flex justify-between items-start">
                <h3 id="calendar-modal-title" class="text-2xl font-bold mb-6"></h3>
                <button id="calendar-modal-close" class="p-1 -mt-2 -mr-2 text-2xl">&times;</button>
            </div>
            <div id="calendar-modal-body" class="space-y-4 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DATA ---
        const weeklySchedule = [
            { day: 1, start: "10:00", end: "11:00", name: "Internet of Things", code: "CSCORE2H001", type: "Lecture", location: "Unknown", lecturer: "N/A", semester: 1 },
            { day: 1, start: "11:00", end: "12:00", name: "Internet of Things", code: "CSCORE2H001", type: "Seminar", location: "Unknown", lecturer: "N/A", semester: 1 },
            { day: 1, start: "12:00", end: "13:00", name: "Internet of Things", code: "CSCORE2H001", type: "Seminar 2", location: "Unknown", lecturer: "N/A", semester: 1 },
            { day: 2, start: "12:00", end: "13:00", name: "Machine Learning", code: "CSCORE2H001", type: "Lecture", location: "FML 014", lecturer: "N/A", semester: 1 },
            { day: 2, start: "13:00", end: "14:00", name: "Machine Learning", code: "CSCORE2H001", type: "Seminar 2", location: "Room 311", lecturer: "N/A", semester: 1 },
            { day: 2, start: "15:00", end: "16:00", name: "Machine Learning", code: "CSCORE2H001", type: "Seminar 2", location: "Room 311", lecturer: "N/A", semester: 1 },
            { day: 4, start: "14:00", end: "15:00", name: "Web Innovations", code: "", type: "Lecture", location: "i3 Building Lecture Theatre 1", lecturer: "N/A", semester: 1 },
            { day: 4, start: "15:00", end: "16:00", name: "Web Innovations", code: "", type: "Seminar", location: "Room 411", lecturer: "N/A", semester: 1 },
            { day: 5, start: "14:00", end: "15:00", name: "Cyber Security", code: "CSCORE1H001", type: "Lecture", location: "Unknown", lecturer: "N/A", semester: 1 },
            { day: 5, start: "15:00", end: "16:00", name: "Cybersecurity", code: "", type: "Seminar 1", location: "FML 311a", lecturer: "N/A", semester: 1 },
            { day: 5, start: "16:00", end: "17:00", name: "Cybersecurity", code: "", type: "Seminar 2", location: "FML 311a", lecturer: "N/A", semester: 1 },
            // Semester 2
            { day: 2, start: "10:00", end: "11:00", name: "Mobile Development", code: "", type: "Lecture", location: "FML 014", lecturer: "Mark Greenwood", semester: 2 },
            { day: 2, start: "11:00", end: "12:00", name: "Mobile Development", code: "", type: "Seminar 1", location: "FML 311A", lecturer: "Mark Greenwood", semester: 2 },
            { day: 2, start: "12:00", end: "13:00", name: "Mobile Development", code: "", type: "Seminar 2", location: "FML 311A", lecturer: "Mark Greenwood", semester: 2 },
            { day: 4, start: "10:00", end: "11:00", name: "Spatial Computing", code: "", type: "Lecture", location: "FML 311A", lecturer: "David Reid", semester: 2 },
            { day: 4, start: "11:00", end: "12:00", name: "Spatial Computing", code: "", type: "Seminar 1", location: "FML 311A", lecturer: "David Reid", semester: 2 },
            { day: 4, start: "12:00", end: "13:00", name: "Spatial Computing", code: "", type: "Seminar 2", location: "FML 311A", lecturer: "David Reid", semester: 2 },
        ];
        const academicCalendarEvents = [
            { name: "Induction", start: "2025-09-22", end: "2025-09-26", type: "uni" },{ name: "Teaching Weeks", start: "2025-09-22", end: "2025-10-31", type: "uni" },{ name: "Reflective Week", start: "2025-11-03", end: "2025-11-07", type: "break" },{ name: "Teaching Weeks", start: "2025-11-10", end: "2025-12-19", type: "uni" },{ name: "Christmas Break", start: "2025-12-22", end: "2026-01-04", type: "break" },{ name: "Assessment Weeks", start: "2026-01-05", end: "2026-01-16", type: "uni" },{ name: "Induction Week (PGT)", start: "2026-01-12", end: "2026-01-16", type: "uni" },{ name: "Teaching Weeks", start: "2026-01-20", end: "2026-03-27", type: "uni" },{ name: "Easter Break", start: "2026-03-30", end: "2026-04-12", type: "break" },{ name: "Teaching Weeks", start: "2026-04-13", end: "2026-04-24", type: "uni" },{ name: "Assessment Week", start: "2026-04-27", end: "2026-05-01", type: "uni" },{ name: "Graduation Week", start: "2026-07-13", end: "2026-07-17", type: "graduation" },
        ];
        
        let assessments = [
            { title: "Internet-of-Things (IoT)", deadline: "2025-12-17T23:59:00" },
            { title: "Machine Learning Project Proposal", deadline: "2025-11-07T23:59:00" },
            { title: "Machine Learning Final Project", deadline: "2026-01-16T23:59:00" },
            { title: "Spatial Computing", deadline: "2026-05-01T23:59:00" },
            { title: "Spatial Computing Portfolio", deadline: "2026-05-01T23:59:00" },
            { title: "Computer and Information Security", deadline: "2026-01-16T23:59:00" },
            { title: "Web Innovations Project", deadline: "2026-01-09T23:59:00" },
            { title: "Mobile Development", deadline: "2026-05-01T23:59:00" },
            { title: "Examination In Mobile Development", deadline: "2026-05-02T12:00:00" },
            { title: "Dissertation", deadline: "2026-04-15T17:00:00" },
            { title: "Knowledge Management Research", deadline: "2025-10-30T23:59:00" },
            { title: "Citex", deadline: "2025-11-30T23:59:00" }
        ];
        
        let allLectures = [];

        // --- FULL SCHEDULE GENERATION ---
        function generateFullSchedule() {
            const teachingPeriods = [
                { start: new Date('2025-09-22'), end: new Date('2025-10-31'), semester: 1 },
                { start: new Date('2025-11-10'), end: new Date('2025-12-19'), semester: 1 },
                { start: new Date('2026-01-20'), end: new Date('2026-03-27'), semester: 2 },
                { start: new Date('2026-04-13'), end: new Date('2026-04-24'), semester: 2 }
            ];

            teachingPeriods.forEach(period => {
                for (let d = new Date(period.start); d <= period.end; d.setDate(d.getDate() + 1)) {
                    const dayOfWeek = (d.getDay() === 0) ? 7 : d.getDay();
                    const lecturesOnDay = weeklySchedule.filter(l => l.day === dayOfWeek && (l.semester === period.semester));

                    lecturesOnDay.forEach(lecture => {
                        allLectures.push({ ...lecture, date: new Date(d) });
                    });
                }
            });
        }
        
        // --- 3D BACKGROUND ---
        let scene, camera, renderer, stars;
        function init3DBackground() {
            const canvas = document.getElementById('bg-canvas');
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
            camera.position.z = 1;
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);

            const starGeo = new THREE.BufferGeometry();
            const starVertices = [];
            for(let i=0; i<10000; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() * -2000);
                starVertices.push(x, y, z);
            }
            starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            
            let starMaterial = new THREE.PointsMaterial({ color: 0xaaaaaa, size: 0.7, transparent: true });
            stars = new THREE.Points(starGeo, starMaterial);
            scene.add(stars);

            window.addEventListener('resize', onWindowResize, false);
            document.addEventListener('mousemove', onMouseMove, false);

            animate();
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        let mouseX = 0, mouseY = 0;
        function onMouseMove(event) {
            mouseX = event.clientX - window.innerWidth / 2;
            mouseY = event.clientY - window.innerHeight / 2;
        }

        function animate() {
            camera.position.x += (mouseX * 0.00001 - camera.position.x) * 0.05;
            camera.position.y += (-mouseY * 0.00001 - camera.position.y) * 0.05;
            camera.lookAt(scene.position);
            stars.rotation.y += 0.0001;
            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        
        // --- NAVIGATION ---
        const menuBtn = document.getElementById('menu-btn'), closeBtn = document.getElementById('close-btn'), mobileMenu = document.getElementById('mobile-menu');
        const mainNavLinks = document.querySelectorAll('#main-nav-links a'), mobileNavLinksContainer = document.getElementById('mobile-nav-links');
        const mobileTitle = document.getElementById('mobile-title'), pages = document.querySelectorAll('.page');
        
        mobileNavLinksContainer.innerHTML = document.getElementById('main-nav-links').innerHTML;

        menuBtn.addEventListener('click', () => mobileMenu.classList.remove('-translate-x-full'));
        closeBtn.addEventListener('click', () => mobileMenu.classList.add('-translate-x-full'));
        
        const handleNav = (targetId) => {
            pages.forEach(p => p.classList.toggle('active', p.id === targetId));
            const activeLink = document.querySelector(`a[href="#${targetId}"]`);
            mobileTitle.textContent = activeLink.textContent;
            document.querySelectorAll('.nav-link').forEach(l => l.classList.toggle('active', l.getAttribute('href') === `#${targetId}`));
            mobileMenu.classList.add('-translate-x-full');
            window.scrollTo(0, 0);
        };
        
        document.querySelectorAll('.nav-link').forEach(l => l.addEventListener('click', (e) => { e.preventDefault(); handleNav(l.getAttribute('href').substring(1)); }));

        // --- SCHEDULE PAGE ---
        const todayDateEl = document.getElementById('today-date'), scheduleContainer = document.getElementById('schedule-container'), upcomingLectureCard = document.getElementById('upcoming-lecture-card');
        
        const renderSchedule = () => {
            const now = new Date();
            todayDateEl.textContent = now.toLocaleDateString('en-GB', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            
            const isSem2 = now >= new Date('2026-01-20');
            const todaysLectures = weeklySchedule.filter(l => {
                const dayOfWeek = (now.getDay() === 0) ? 7 : now.getDay();
                const semesterCheck = isSem2 ? l.semester === 2 : l.semester === 1;
                return l.day === dayOfWeek && semesterCheck;
            }).sort((a,b) => a.start.localeCompare(b.start));
            
            scheduleContainer.innerHTML = '';
            let currentOrNextLecture = null;

            todaysLectures.forEach(lecture => {
                const [startH, startM] = lecture.start.split(':');
                const [endH, endM] = lecture.end.split(':');
                const startTime = new Date(now).setHours(startH, startM, 0, 0);
                const endTime = new Date(now).setHours(endH, endM, 0, 0);
                
                let typeColorClass = lecture.type.toLowerCase().includes('seminar') ? 'text-violet-400' : 'text-sky-400';

                const card = document.createElement('div');
                card.className = 'futuristic-card p-4 rounded-lg flex justify-between items-center';
                let cardContent = `<div><h4 class="font-bold text-lg">${lecture.name} <span class="text-sm font-normal ${typeColorClass}">${lecture.type}</span></h4><p class="text-sm text-gray-400">${lecture.start} - ${lecture.end} | ${lecture.location}</p><p class="text-sm text-gray-500">${lecture.lecturer}</p></div>`;

                if (now < startTime && !currentOrNextLecture) {
                    currentOrNextLecture = { ...lecture, isUpcoming: true, startTime };
                    cardContent += `<span class="text-sky-400 font-semibold text-sm">Upcoming</span>`;
                } else if (now >= startTime && now < endTime) {
                    currentOrNextLecture = { ...lecture, isCurrent: true, endTime };
                    cardContent += `<span class="text-green-400 font-semibold text-sm">In Progress</span>`;
                } else if (now >= endTime) {
                    card.classList.add('opacity-50');
                    cardContent += `<span class="text-gray-500 font-semibold text-sm">Finished</span>`;
                }
                card.innerHTML = cardContent;
                scheduleContainer.appendChild(card);
            });

            if (todaysLectures.length === 0) scheduleContainer.innerHTML = `<div class="futuristic-card text-center p-8 rounded-lg"><p class="text-gray-300">No lectures scheduled for today. Enjoy your day!</p></div>`;

            if (currentOrNextLecture) {
                if (currentOrNextLecture.isCurrent) {
                    upcomingLectureCard.innerHTML = `<div class="futuristic-card p-6 rounded-2xl bg-green-900/20 border-green-700/60"><h3 class="text-2xl font-bold text-green-300">In Progress!</h3><p class="text-lg text-gray-300">${currentOrNextLecture.name}</p><div class="text-4xl font-extrabold text-white mt-4" id="class-countdown"></div><p class="text-sm text-center font-normal text-gray-400">Time remaining</p></div>`;
                    startClassCountdown(currentOrNextLecture.endTime);
                } else if (currentOrNextLecture.isUpcoming) {
                    upcomingLectureCard.innerHTML = `<div class="futuristic-card p-6 rounded-2xl bg-sky-900/20 border-sky-700/60"><h3 class="text-2xl font-bold text-sky-300">Upcoming</h3><p class="text-lg text-gray-300">${currentOrNextLecture.name} at ${currentOrNextLecture.start}</p><p class="text-sm text-gray-400">${currentOrNextLecture.location}</p></div>`;
                }
            } else { upcomingLectureCard.innerHTML = ``; }
        };

        let classCountdownInterval;
        function startClassCountdown(endTime) {
            clearInterval(classCountdownInterval);
            const countdownEl = document.getElementById('class-countdown');
            classCountdownInterval = setInterval(() => {
                const distance = endTime - new Date().getTime();
                if (distance < 0) { clearInterval(classCountdownInterval); countdownEl.textContent = "Finished!"; renderSchedule(); return; }
                const h = Math.floor(distance / 36e5).toString().padStart(2, '0'), m = Math.floor(distance % 36e5 / 6e4).toString().padStart(2, '0'), s = Math.floor(distance % 6e4 / 1000).toString().padStart(2, '0');
                countdownEl.textContent = `${h}:${m}:${s}`;
            }, 1000);
        }
        
        // --- ACADEMIC CALENDAR ---
        const calendarTitleEl = document.getElementById('calendar-title'), calendarGridEl = document.getElementById('calendar-grid'), calendarModal = document.getElementById('calendar-modal');
        let currentDate = new Date();
        
        const renderCalendar = () => {
            calendarGridEl.innerHTML = '';
            calendarTitleEl.textContent = currentDate.toLocaleDateString('en-GB', { month: 'long', year: 'numeric' });
            
            const month = currentDate.getMonth(), year = currentDate.getFullYear();
            const firstDay = new Date(year, month, 1).getDay(), daysInMonth = new Date(year, month + 1, 0).getDate();
            const dayOffset = (firstDay === 0) ? 6 : firstDay - 1;

            for(let i=0; i<dayOffset; i++) calendarGridEl.innerHTML += `<div class="calendar-day other-month aspect-square"></div>`;

            for(let day=1; day<=daysInMonth; day++) {
                const cellDate = new Date(year, month, day);
                cellDate.setHours(0,0,0,0);
                
                const lecturesOnDay = allLectures.filter(l => l.date.toDateString() === cellDate.toDateString());
                const uniEventsOnDay = academicCalendarEvents.filter(e => {
                    const start = new Date(e.start), end = new Date(e.end);
                    start.setHours(0,0,0,0); end.setHours(23,59,59,999);
                    return cellDate >= start && cellDate <= end;
                });

                let eventHtml = '';
                if(lecturesOnDay.length > 0 || uniEventsOnDay.length > 0) {
                     eventHtml += '<div class="flex flex-col gap-1 mt-1 p-1">';
                     if(lecturesOnDay.some(l => l.type.toLowerCase().includes('lecture'))) eventHtml += `<div class="event-bar event-bar-lecture w-full"></div>`;
                     if(lecturesOnDay.some(l => l.type.toLowerCase().includes('seminar'))) eventHtml += `<div class="event-bar event-bar-seminar w-full"></div>`;
                     if(uniEventsOnDay.some(e => e.type === 'uni')) eventHtml += `<div class="event-bar event-bar-uni w-full"></div>`;
                     if(uniEventsOnDay.some(e => e.type === 'break')) eventHtml += `<div class="event-bar event-bar-break w-full"></div>`;
                     if(uniEventsOnDay.some(e => e.type === 'graduation')) eventHtml += `<div class="event-bar event-bar-graduation w-full"></div>`;
                    eventHtml += '</div>';
                }
                
                const dayCell = document.createElement('div');
                dayCell.className = `calendar-day ${cellDate.toDateString() === new Date().toDateString() ? 'today' : ''} aspect-square p-2 text-center text-sm`;
                dayCell.innerHTML = `<span class="font-semibold">${day}</span>${eventHtml}`;
                dayCell.addEventListener('click', () => showDayDetails(cellDate, lecturesOnDay, uniEventsOnDay));
                calendarGridEl.appendChild(dayCell);
            }
        };

        const showDayDetails = (date, lectures, uniEvents) => {
            document.getElementById('calendar-modal-title').textContent = date.toLocaleDateString('en-GB', { weekday: 'long', day: 'numeric', month: 'long' });
            const body = document.getElementById('calendar-modal-body');
            body.innerHTML = '';

            if (lectures.length === 0 && uniEvents.length === 0) {
                body.innerHTML = `<p class="text-gray-400">No events scheduled for this day.</p>`;
            } else {
                uniEvents.forEach(e => {
                    let colorClass = 'text-amber-300';
                    if (e.type === 'break') colorClass = 'text-green-300';
                    if (e.type === 'graduation') colorClass = 'text-pink-300';
                    body.innerHTML += `<div class="p-3 rounded-lg bg-gray-800/50"><h4 class="font-bold ${colorClass}">${e.name}</h4></div>`
                });
                lectures.sort((a,b) => a.start.localeCompare(b.start)).forEach(l => {
                    let typeColorClass = l.type.toLowerCase().includes('seminar') ? 'text-violet-400' : 'text-sky-400';
                    body.innerHTML += `<div class="p-3 rounded-lg bg-gray-800/50"><h4 class="font-bold">${l.name} <span class="text-sm font-normal ${typeColorClass}">${l.type}</span></h4><p class="text-sm text-gray-400">${l.start} - ${l.end} | ${l.location}</p><p class="text-sm text-gray-500">${l.lecturer}</p></div>`;
                });
            }
            calendarModal.classList.add('open');
        };

        document.getElementById('calendar-modal-close').addEventListener('click', () => calendarModal.classList.remove('open'));
        document.getElementById('prev-month').addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() - 1); renderCalendar(); });
        document.getElementById('next-month').addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() + 1); renderCalendar(); });
        
        // --- ASSESSMENTS PAGE ---
        const assessmentList = document.getElementById('assessment-list'), modal = document.getElementById('assessment-modal'), form = document.getElementById('assessment-form');

        const renderAssessments = () => {
            assessmentList.innerHTML = assessments.length === 0 ? `<div class="futuristic-card text-center p-8 rounded-lg"><p class="text-gray-300">No assessments added yet. Click "+ Add New" to get started.</p></div>` : '';
            assessments.sort((a,b) => new Date(a.deadline) - new Date(b.deadline)).forEach((ass, i) => {
                const card = document.createElement('div');
                card.className = 'futuristic-card p-6 rounded-2xl flex items-center gap-6';
                card.innerHTML = `
                    <div class="relative w-24 h-24 flex-shrink-0">
                        <svg class="w-full h-full" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="45" fill="transparent" stroke="#374151" stroke-width="8"/>
                            <circle id="progress-ring-${i}" cx="50" cy="50" r="45" fill="transparent" stroke="#38bdf8" stroke-width="8" stroke-linecap="round" stroke-dasharray="283" stroke-dashoffset="283" transform="rotate(-90 50 50)"/>
                        </svg>
                         <div id="ass-countdown-text-${i}" class="absolute inset-0 flex flex-col items-center justify-center text-center"></div>
                    </div>
                    <div class="flex-grow">
                        <h3 class="text-xl font-bold">${ass.title}</h3>
                        <p class="text-gray-400 text-sm">Due: ${new Date(ass.deadline).toLocaleString('en-GB')}</p>
                    </div>`;
                assessmentList.appendChild(card);
                startAssessmentCountdown(i, ass.deadline);
            });
        };

        let assCountdownIntervals = {};
        function startAssessmentCountdown(index, deadline) {
            clearInterval(assCountdownIntervals[index]);
            const ring = document.getElementById(`progress-ring-${index}`);
            const text = document.getElementById(`ass-countdown-text-${index}`);
            
            const ninetyDaysInMs = 90 * 24 * 60 * 60 * 1000;
            const circumference = 2 * Math.PI * 45; // 282.7

            const update = () => {
                const distance = new Date(deadline).getTime() - new Date().getTime();
                if (distance < 0) {
                    clearInterval(assCountdownIntervals[index]);
                    text.innerHTML = `<span class="text-lg font-bold text-gray-500">Passed</span>`;
                    ring.style.strokeDashoffset = 0;
                    ring.style.stroke = '#4b5563'; // gray-600
                    return;
                }
                const days = Math.floor(distance / 864e5);
                const hours = Math.floor(distance % 864e5 / 36e5);

                text.innerHTML = `<span class="text-2xl font-bold">${days}</span><span class="text-xs text-gray-400">days left</span>`;
                
                const percentLeft = Math.max(0, Math.min(1, distance / ninetyDaysInMs));
                ring.style.strokeDashoffset = circumference * (1 - percentLeft);
                
                if(days <= 7) ring.style.stroke = '#ef4444'; // red-500
                else if(days <= 30) ring.style.stroke = '#f59e0b'; // amber-500
                else ring.style.stroke = '#38bdf8'; // sky-400
            };
            update();
            assCountdownIntervals[index] = setInterval(update, 3600000); // update every hour
        }

        document.getElementById('add-assessment-btn').addEventListener('click', () => modal.classList.add('open'));
        document.getElementById('cancel-assessment-btn').addEventListener('click', () => modal.classList.remove('open'));
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            assessments.push({ title: form.title.value, deadline: `${form['deadline-date'].value}T${form['deadline-time'].value}` });
            renderAssessments();
            modal.classList.remove('open');
            form.reset();
        });

        // --- Milestones Page ---
        const milestonesContainer = document.getElementById('milestones-container');
        const renderMilestones = () => {
            if (!milestonesContainer) return;
            const milestones = [
                { date: '2025-09-22', title: 'Start University' },
                { date: '2025-10-03', title: 'Obtain Lecture Notes' },
                { date: '2025-10-03', title: 'Choose Dissertation Topic & Supervisor' },
                { date: '2025-10-05', title: 'Gather Dissertation Sources' },
                { date: '2025-10-06', title: 'Gather Dissertation Info & Plan Execution' },
                { date: '2025-10-12', title: 'Make a Start on Chapter One' },
                { date: '2025-11-01', title: 'Send Ethics Form for Approval' },
                { date: '2025-11-30', title: 'Complete Chapters 1 & 2 of Dissertation' },
                { date: '2026-01-30', title: 'Complete Chapters 3 & 4' },
                { date: '2026-02-28', title: 'Complete Chapter 5' },
                { date: '2026-03-20', title: 'Complete Dissertation Reviews' },
                { date: '2026-03-25', title: 'Submit Dissertation (Personal Goal)' },
                { date: '2026-07-17', title: 'Graduation' },
            ].sort((a,b) => new Date(a.date) - new Date(b.date));
            
            let completedMilestones = JSON.parse(localStorage.getItem('completedMilestones')) || [];

            milestonesContainer.innerHTML = '';

            milestones.forEach((milestone, index) => {
                const milestoneDate = new Date(milestone.date);
                const isPast = milestoneDate < new Date();
                const isCompleted = completedMilestones.includes(index);

                let iconSvg, ringColorClass = 'ring-gray-900', bgColorClass = 'bg-gray-700';
                
                if (isCompleted) {
                    iconSvg = `<svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>`;
                    bgColorClass = 'bg-green-900';
                    ringColorClass = 'ring-green-900/50';
                } else {
                     iconSvg = `<svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>`;
                }

                const item = document.createElement('div');
                item.className = `timeline-item mb-10 ml-8`;
                item.innerHTML = `
                    <span class="absolute flex items-center justify-center w-8 h-8 ${bgColorClass} rounded-full -left-4 ring-4 ${ringColorClass}">${iconSvg}</span>
                    <div class="futuristic-card p-6 rounded-xl flex items-center justify-between gap-4">
                        <div class="milestone-content ${isCompleted ? 'completed' : ''}">
                            <h3 class="text-lg font-semibold text-white">${milestone.title}</h3>
                            <time class="block mb-2 text-sm font-normal leading-none">${milestoneDate.toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' })}</time>
                        </div>
                        <input type="checkbox" class="milestone-checkbox flex-shrink-0" data-index="${index}" ${isCompleted ? 'checked' : ''}>
                    </div>`;
                milestonesContainer.appendChild(item);
            });

            const milestoneObserver = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => entry.target.classList.add('visible'), index * 100);
                    }
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('#milestones .timeline-item').forEach(item => milestoneObserver.observe(item));

            document.querySelectorAll('.milestone-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    if (e.target.checked) {
                        if (!completedMilestones.includes(index)) completedMilestones.push(index);
                    } else {
                        completedMilestones = completedMilestones.filter(i => i !== index);
                    }
                    localStorage.setItem('completedMilestones', JSON.stringify(completedMilestones));
                    renderMilestones();
                });
            });
        }


        // Initial renders
        generateFullSchedule();
        init3DBackground();
        renderSchedule();
        setInterval(renderSchedule, 60000);
        renderCalendar();
        renderAssessments();
        renderMilestones();
        handleNav('home');
    });
    </script>
</body>
</html>


